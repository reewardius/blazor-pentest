@page "/ping"

<h3>Пинг удаленного сервера</h3>

<p>Введите адрес для пинга:</p>
<input @bind="serverAddress" />
<button @onclick="async () => await PingServer()">Пинговать</button>

@if (pingResult != null)
{
    <p>Результат пинга: @pingResult</p>
}

@code {
    private string serverAddress = "example.com";
    private string pingResult;

    private async Task PingServer()
    {
        try
        {
            if (string.IsNullOrWhiteSpace(serverAddress))
            {
                pingResult = "Введите корректный адрес для пинга.";
                return;
            }

            Uri uriResult;
            if (!Uri.TryCreate(serverAddress, UriKind.Absolute, out uriResult))
            {
                pingResult = "Введите корректный адрес URL.";
                return;
            }

            using (var ping = new System.Net.NetworkInformation.Ping())
            {
                var reply = await ping.SendPingAsync(uriResult.Host);
                pingResult = reply.Status.ToString();
            }

            StateHasChanged(); // Обновление интерфейса
        }
        catch (Exception ex)
        {
            pingResult = $"Ошибка: {ex.Message}";
        }
    }
}
